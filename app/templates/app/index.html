{% extends "app/base.html" %}

{% block content %}
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="http://cdn.jsdelivr.net/raphael/2.1.2/raphael-min.js"></script>
<script src="http://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

<div class="row clearfix">
		<div class="col-md-2 column">
             <ul class="nav nav-pills nav-stacked">
                 {% for app in apps %}
                 <li><a href="{% url 'request_name' location=app.name %}" data-toggle="tab">{{app.name}}</a></li>
                 {% endfor %}
             </ul>
		</div>
		<div class="col-md-10 column">
			<div class="row clearfix">
				<div class="col-md-3 column">
                    <div id="gauge1"  style=" height:170px" ></div>
				</div>
				<div class="col-md-9 column">
                    <div id="container"  style="min-width: 700px; height: 300px; margin: 0 auto" ></div>
				</div>
			</div>
		</div>
</div>
<script>
$(function()
    $("#home").click(function(){
        $.ajax({
            url: "{% url 'ajax_get_test' %}",
            type: "json",
            data: {"temp":home},
            success: function (response) {
                alert('response received');
                // ajax success callback
            },
            error: function (response) {
                alert('ajax failed');
                // ajax error callback
            },
        });
   
  
    })
});
</script>
<script>
     $.getJSON('',function(data){
         var g = new JustGage({
          id: "gauge",
          value: 30,
          min: 0,
          max: 100,
          title: "test",
       });
     });


</script>
<script>
  var g = new JustGage({
    id: "gauge1",
    value: 55,
    min: 0,
    max: 100,
    title: "Visitors"
  });
</script>
<script>
$(function () {
            // first , setting highchart
var chart = new Highcharts.Chart({
     chart: { renderTo: 'container', type: 'spline' },
     title: { text: '溫度' },
     subtitle: { text: '' },
     xAxis: { type: 'datetime' },
     yAxis: { title: { text: '溫度 (°C)'} }
     });

      // second , get json source
     $.getJSON("",function(data) {
            //get series one by one
        var len = Object.keys(data).length;
        var seriesData = [];
        var chartName = data[0].fields.env_location;
            for (var j = 0; j < len; j++) {
                var x = new Date(data[j].fields.updated_at).getTime();
                var y = data[j].fields.env_temperature;  
                    x = parseFloat(x) 
                    y = parseFloat(y)
                    seriesData.push([x, y]);
                }
            chart.addSeries({
                name: chartName,
                data: seriesData
            });
                    
        });
  });
</script>

{% endblock %}
