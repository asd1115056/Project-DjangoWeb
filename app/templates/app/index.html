{% extends "app/base.html" %}
{% block content %}
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/justgage/1.3.1/justgage.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<div class="row clearfix">
    <div class="col-md-12 column">
        <br />
        <br />
        <br />
    </div>
</div>
<div class="row clearfix">
    <div class="col-md-7 column">
    </div>
    <div class="col-md-5 column">
        <div class="panel panel-default">
            <div class="panel-heading">
                Pet<br />
                Nickname&ensp;&emsp;Tag&ensp;&emsp;Food-Eat&ensp;&emsp;Water-Drink&ensp;&emsp;LastUpdate
            </div>
            <div class="list-group" id="pet_panel">
            </div>
        </div>
        <br />
        <div class="panel panel-default">
            <div class="panel-heading">面板标题</div>
            <div class="list-group">
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        window.onload = pet();
        function pet() {
            $.ajax({
                url: "{% url 'Tag_list' %}",
                type: "GET",
                cache: false,
                dataType: "json",
                async: false,
                success: function (data) {
                    var len = Object.keys(data).length;
                    if (len) {
                        for (var j = 0; j < len; j++) {
                            tag = data[j].fields.Tag;
                            $('#pet_panel').append('<a href="#" class="list-group-item"><h4 class="list-group-item-heading">' + tag + '</h4><p class="list-group-item-text">我们提供 24*7 支持。</p></a>');

                            nickname = data[j].fields.nickname;
                            feed_amount_daily = data[j].fields.user_feed_amount_setting_daily;
                            water_drinking_daily = data[j].fields.user_water_drinking_setting_daily;
                            if (feed_amount_daily && water_drinking_daily) {
                                feed_amount_daily = data[j].fields.suggest_feed_amount_daily;
                                water_drinking_daily = data[j].fields.suggest_water_drinking_daily;
                            }
                            console.log(feed_amount_daily);
                            console.log(water_drinking_daily);
                            //user_water_drinking_setting_daily
                            //user_feed_amount_setting_daily
                            data = { 'TAG': tag };
                            $.ajax({
                                type: "POST",
                                cache: false,
                                url: "{% url 'pet_pannel' %}",
                                data: data,
                                async: false,
                                success: function (response) {
                                    //console.log(response);
                                    $('#pet_panel').append('<a href="#" class="list-group-item"><h4 class="list-group-item-heading">' + tag + '</h4><p class="list-group-item-text">我们提供 24*7 支持。</p></a>');
                                }
                            });
                        }
                    }
                }
            });
        }
    })
</script>
    {% endblock %}
